<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Messenger MVP</title>
  <style>
    :root { --green: rgb(137,243,54); --bg: #000; --panel: #0b0b0b; --text: #eaeaea; }
    body { margin:0; font-family: system-ui, Arial; background: var(--bg); color: var(--text); }
    .top { padding:12px 16px; border-bottom: 1px solid #222; display:flex; gap:12px; align-items:center; }
    .brand { color: var(--green); font-weight: 800; letter-spacing: .5px; }
    input, button { background:#111; color:var(--text); border:1px solid #333; padding:10px; border-radius:10px; }
    button { cursor:pointer; border-color: var(--green); }
    button:hover { filter: brightness(1.1); }
    .wrap { display:grid; grid-template-columns: 320px 1fr; height: calc(100vh - 58px); }
    .side { border-right:1px solid #222; background: var(--panel); padding:12px; overflow:auto; }
    .main { padding:12px; display:flex; flex-direction:column; gap:10px; }
    .card { border:1px solid #222; border-radius:14px; padding:12px; background:#070707; }
    .list-item { padding:10px; border:1px solid #222; border-radius:12px; margin:8px 0; cursor:pointer; }
    .list-item:hover { border-color: var(--green); }
    .msgs { flex:1; overflow:auto; border:1px solid #222; border-radius:14px; padding:12px; background:#060606; }
    .msg { margin:10px 0; }
    .me { color: var(--green); }
    .row { display:flex; gap:8px; }
    .grow { flex:1; }
    small { color:#aaa; }
    a { color: var(--green); }
    .chatbar { display:flex; gap:10px; align-items:center; }
    .dot { width:10px; height:10px; border-radius:50%; background:#444; display:inline-block; }
    .dot.online { background: var(--green); }
    .typing { color:#aaa; }
    .loadmore { text-align:center; margin:8px 0; }
  </style>
</head>
<body>
  <div class="top">
    <div class="brand">Чебурнет</div>
    <div id="me"></div>
  </div>

  <div class="wrap">
    <div class="side">
      <div class="card">
        <div><b>Auth</b></div>
        <div class="row" style="margin-top:8px;">
          <input class="grow" id="u" placeholder="username">
          <input class="grow" id="p" placeholder="password" type="password">
        </div>
        <div class="row" style="margin-top:8px;">
          <button onclick="register()">Register</button>
          <button onclick="login()">Login</button>
        </div>
      </div>

      <div class="card" style="margin-top:12px;">
        <div><b>Search user</b></div>
        <div class="row" style="margin-top:8px;">
          <input class="grow" id="q" placeholder="type username">
          <button onclick="search()">Find</button>
        </div>
        <div id="searchRes"></div>
      </div>

      <div class="card" style="margin-top:12px;">
        <div><b>Dialogs</b></div>
        <button style="margin-top:8px;" onclick="loadDialogs()">Reload</button>
        <div id="dialogs"></div>
      </div>
    </div>

    <div class="main">
      <div class="card">
        <div class="chatbar">
          <b>Chat:</b>
          <span id="chatTitle">—</span>
          <span class="dot" id="onlineDot" title="online"></span>
          <span class="typing" id="typingText"></span>
        </div>
      </div>

      <div class="msgs" id="msgs"></div>

      <div class="card">
        <div class="row">
          <input class="grow" id="text" placeholder="Message..." oninput="onTyping()">
          <input type="file" id="file">
          <button onclick="send()">Send</button>
        </div>
        <small>Текст + файл. Превью image/video будет прямо в чате.</small>
      </div>
    </div>
  </div>

<script src="/static/app.js?v=999"></script>
</body>
</html>
